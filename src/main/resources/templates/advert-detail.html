<!DOCTYPE html>
<html class="no-js" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Квартира в Казани</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Сдается квартира в Казани"/>
    <meta name="keywords" content="жилье, сдается квартира"/>

    <link rel="prefetch" href="/js/modernizr-2.6.2.min.js" as="script">
    <link rel="prefetch" href="/js/jquery.min.js" as="script">
    <link rel="prefetch" href="https://api-maps.yandex.ru/2.1/?lang=ru_RU" as="script">

    <link rel="stylesheet" href="/css/animate.css">
    <link rel="stylesheet" href="/css/icomoon.css">
    <link rel="stylesheet" href="/css/bootstrap.min.css">
    <link rel="stylesheet" href="/css/bootstrap-theme.min.css">
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="/css/bootstrap-select.css">
    <link rel="stylesheet" href="/css/bootstrap-slider.css">
    <link rel="stylesheet" href="/css/lightgallery.min.css">
    <link rel="stylesheet" href="/css/lg-transitions.min.css">
    <link rel="stylesheet" href="/css/lg-fb-comment-box.min.css">
    <link rel="stylesheet" href="/css/login.css">
</head>
<body>
<div th:replace="fragments/login-popup :: login-popup"/>
<div id="fh5co-page">
    <header th:replace="fragments/header :: header"/>
    <div class="page-title-advert" style="background-image: url(/images/slide_6.jpg);">
        <div class="overlay overlay-advert"></div>
    </div>
    <div class="adv-page">
        <div class="row">
            <div class="col-md-12">
                <div id="gal2">
                    <div class="gallery-item adverts-gallery"
                         th:style="${'background-image:  url('+mainPhoto.path+');'}"
                         th:href="${mainPhoto.path}">
                        <img th:src="${mainPhoto.path}" style="display: none;"/>
                    </div>
                    <div th:each="otherPhoto : ${otherPhotos}"
                         th:href="${otherPhoto.path}"
                         class="gallery-item"
                         style="display: none;">
                        <img th:src="${otherPhoto.path}"/>
                    </div>
                </div>
            </div>
        </div>
        <div class="adv-header-container">
            <div class="container">
                <div class="row">
                    <div class="col-md-3">
                        <div class="sidebar-container row">
                            <div class="adv-price-container col-mg-12">
                                <span th:text="${#numbers.formatInteger(advert.price, 0, 'WHITESPACE') + 'Р' + (advert.withPublicServices ? ' + ку' : '') + (advert.withDeposit ? ' + депозит' : '')}">1</span>
                            </div>
                            <div class="sidebar-main-content">
                                <div class="col-mg-12 sidebar-item">
                                    <button id="show-user" th:advertId="${advert.id}" type="button"
                                            class="center-block btn btn-danger btn-lg">
                                        <span class="glyphicon glyphicon-earphone" aria-hidden="true"></span> Телефон
                                        владельца
                                    </button>
                                </div>
                                <div class="col-mg-12 sidebar-item">
                                    <div class="adv-opt-container">
                                        <div id="adv-detail-map"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-9">
                        <div class="adv-param-container">
                            <div class="row">
                                <h1 class="adv-param-header" th:text="${advert.header}"></h1>
                                <h2 class="adv-param-address" th:text="${advert.address}">г.Казань, ул. Мира, 6</h2>
                            </div>
                            <div class="row adv-opt-row">
                                <div class="col-sm-2 adv-opt-container">
                                    <span class="adv-param-icon glyphicon glyphicon-calendar" aria-hidden="true"></span>
                                    <span class="adv-param-icon-text"
                                          th:text="${advert.rooms +' ' + T(com.airent.template.Utils).getRoomsText(advert.rooms)}">2 комнаты</span>
                                </div>
                                <div class="col-sm-2 adv-opt-container">
                                    <span class="adv-param-icon glyphicon glyphicon-resize-full"
                                          aria-hidden="true"></span>
                                    <span class="adv-param-icon-text"
                                          th:inline="text">[[${advert.sq}]] м<sup>2</sup></span>
                                </div>
                                <div class="col-sm-2 adv-opt-container">
                                    <span class="adv-param-icon glyphicon glyphicon-export"
                                          aria-hidden="true"></span>
                                    <span class="adv-param-icon-text"
                                          th:text="${advert.floor+'/'+advert.maxFloor+' этаж'}"></span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div id="geo-data" th:latitude="${advert.latitude}" th:longitude="${advert.longitude}"></div>
        <div class="adv-details-container">
            <div class="container">
                <div class="row">
                    <div class="col-md-3"></div>
                    <div class="col-md-9">
                        <div class="adv-details-desc">
                            <h4>Описание</h4>
                            <div class="adv-details-desc-group">
                                <span th:text="${advert.description}"></span>
                            </div>
                            <h4>Жилье</h4>
                            <div class="adv-details-desc-group">
                                <div><span>Спальных мест: <span th:text="${advert.bedrooms}">2</span></span></div>
                                <div><span>Количество кроватей: <span th:text="${advert.beds}">1</span></span></div>
                                <div><span th:if="${T(com.airent.template.Utils).checkCondition(advert.conditions, 0)}">Балкон</span>
                                </div>
                            </div>
                            <h4 th:if="${T(com.airent.template.Utils).checkAtLeastOneCondition(advert.conditions, 1, 2, 3, 4, 5)}">
                                Удобства</h4>
                            <div class="adv-details-desc-group">
                                <div><span th:if="${T(com.airent.template.Utils).checkCondition(advert.conditions, 1)}">Стиральная машина</span>
                                </div>
                                <div><span th:if="${T(com.airent.template.Utils).checkCondition(advert.conditions, 2)}">Кондиционер</span>
                                </div>
                                <div><span th:if="${T(com.airent.template.Utils).checkCondition(advert.conditions, 3)}">Интернет</span>
                                </div>
                                <div><span th:if="${T(com.airent.template.Utils).checkCondition(advert.conditions, 4)}">Телевизор</span>
                                </div>
                                <div><span th:if="${T(com.airent.template.Utils).checkCondition(advert.conditions, 5)}">Холодильник</span>
                                </div>
                            </div>
                            <h4 th:if="${T(com.airent.template.Utils).checkAtLeastOneCondition(advert.conditions, 6, 7, 8)}">
                                Можно</h4>
                            <div class="adv-details-desc-group">
                                <div><span th:if="${T(com.airent.template.Utils).checkCondition(advert.conditions, 6)}">C детьми</span>
                                </div>
                                <div><span th:if="${T(com.airent.template.Utils).checkCondition(advert.conditions, 7)}">Курить</span>
                                </div>
                                <div><span th:if="${T(com.airent.template.Utils).checkCondition(advert.conditions, 8)}">С животными</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <footer th:replace="fragments/footer :: footer"/>
</div>

<script src="/js/modernizr-2.6.2.min.js"></script>
<script src="/js/jquery.min.js"></script>

<script async src="/js/jquery.maskedinput.min.js"></script>
<script async src="/js/jquery.easing.1.3.js"></script>
<script async src="/js/bootstrap.js"></script>
<script async src="/js/jquery.mousewheel.min.js"></script>
<script async src="/js/lightgallery-all.min.js"></script>
<script async src="/js/picturefill.min.js"></script>

<script async src="/js/advertDetail.js"></script>
<script async src="/js/login.js"></script>
<script>
    // immediate section
    var phoneRegex = new RegExp("\\+7 \\([0-9]{3}\\) [0-9]{3}-[0-9]{4}$");
    var loginButtonUpdater = function () {
        $("#login-button").prop('disabled', !phoneRegex.test($('#login_phone').val()) | $('#login_password').val().length == 0 | grecaptcha.getResponse().length == 0);
        $("#lost-button").prop('disabled', $('#lost_phone').length == 0 | grecaptcha.getResponse().length == 0);
        $("#register-button").prop('disabled', $('#register_username').length == 0 | $('#register_phone').length === 0 | grecaptcha.getResponse().length == 0);
    };
    function gCaptchaLoadedCallback() {
        grecaptcha.render('login-captcha', {
            'sitekey': '6Le2fgsUAAAAABHgQv4YGApILBc451B2Yhrqlh5k',
            'callback': loginButtonUpdater,
            'expired-callback': loginButtonUpdater
        });
    }
</script>
<script async defer
        src="https://www.google.com/recaptcha/api.js?onload=gCaptchaLoadedCallback&render=explicit&hl=ru"></script>

<script>
    function initMap(ymaps) {
        var latitude = $('#geo-data').attr('latitude');
        var longitude = $('#geo-data').attr('longitude')

        var map = new ymaps.Map("adv-detail-map", {
            center: [latitude, longitude],
            controls: ["zoomControl"],
            zoom: 11
        });
        map.behaviors.disable('scrollZoom');

        var myPlacemark = new ymaps.Placemark([latitude, longitude], {}, {
            preset: 'islands#redIcon'
        });
        map.geoObjects.add(myPlacemark);
    }
</script>
<script async src="https://api-maps.yandex.ru/2.1/?lang=ru_RU&onload=initMap" type="text/javascript"></script>
</body>
</html>

